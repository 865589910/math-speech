# 语音文件补充生成说明

## 📅 更新时间
2025-10-21

## 🎯 需要补充的语音文件

### 1. Section4 加法应用题关键词
需要生成的语音：
- ✅ 一共
- 🆕 总共
- 🆕 共有
- 🆕 和
- ✅ 增加
- 🆕 添上
- ✅ 合起来
- 🆕 倒入
- ✅ 飞来了
- 🆕 游来了
- 🆕 开来了

### 2. Section4 减法应用题关键词
需要生成的语音：
- ✅ 还剩
- 🆕 剩下
- ✅ 比多
- ✅ 比少
- 🆕 多多少
- 🆕 少多少
- ✅ 花了
- 🆕 用去
- ✅ 送给
- 🆕 减少
- ✅ 飞走了
- 🆕 游走了
- 🆕 相差

### 3. Section4 乘法应用题关键词
需要生成的语音：
- 🆕 每……有……
- ✅ 每
- ✅ 倍
- ✅ 积
- ✅ 几个几
- ✅ 一共

### 4. Section4 除法应用题关键词
需要生成的语音：
- ✅ 平均分
- 🆕 每几个装一
- ✅ 商
- 🆕 平均每个是几
- 🆕 能分几份

## 📝 执行步骤

### 步骤1：删除旧的缺失文件（如果有的话）
在 PowerShell 中执行（如果之前生成过这些文件）：

```powershell
cd "C:\Users\pilot\Documents\math speech"

# 删除需要重新生成的文件（如果存在）
Remove-Item "audio\section4_additionProblems\总共.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_additionProblems\共有.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_additionProblems\和.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_additionProblems\添上.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_additionProblems\倒入.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_additionProblems\游来了.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_additionProblems\开来了.mp3" -ErrorAction SilentlyContinue

Remove-Item "audio\section4_subtractionProblems\剩下.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_subtractionProblems\多多少.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_subtractionProblems\少多少.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_subtractionProblems\用去.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_subtractionProblems\减少.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_subtractionProblems\游走了.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_subtractionProblems\相差.mp3" -ErrorAction SilentlyContinue

Remove-Item "audio\section4_multiplicationProblems\每……有…….mp3" -ErrorAction SilentlyContinue

Remove-Item "audio\section4_divisionProblems\每几个装一.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_divisionProblems\平均每个是几.mp3" -ErrorAction SilentlyContinue
Remove-Item "audio\section4_divisionProblems\能分几份.mp3" -ErrorAction SilentlyContinue
```

### 步骤2：重新生成所有音频
```powershell
python 生成语音.py
```

脚本会自动：
- ⏭️ 跳过已存在的文件
- ✅ 生成缺失的新文件
- 📊 显示生成进度和结果

### 步骤3：验证生成结果
检查以下目录中的文件：
```
audio/
├── section4_additionProblems/
│   ├── 一共.mp3
│   ├── 总共.mp3 ⬅️ 新增
│   ├── 共有.mp3 ⬅️ 新增
│   ├── 和.mp3 ⬅️ 新增
│   ├── 添上.mp3 ⬅️ 新增
│   ├── 倒入.mp3 ⬅️ 新增
│   ├── 游来了.mp3 ⬅️ 新增
│   └── 开来了.mp3 ⬅️ 新增
├── section4_subtractionProblems/
│   ├── 剩下.mp3 ⬅️ 新增
│   ├── 多多少.mp3 ⬅️ 新增
│   ├── 少多少.mp3 ⬅️ 新增
│   ├── 用去.mp3 ⬅️ 新增
│   ├── 减少.mp3 ⬅️ 新增
│   ├── 游走了.mp3 ⬅️ 新增
│   └── 相差.mp3 ⬅️ 新增
├── section4_multiplicationProblems/
│   └── 每……有…….mp3 ⬅️ 新增
└── section4_divisionProblems/
    ├── 每几个装一.mp3 ⬅️ 新增
    ├── 平均每个是几.mp3 ⬅️ 新增
    └── 能分几份.mp3 ⬅️ 新增
```

## 📊 统计信息

### 新增语音文件数量
- Section4 加法应用题：7个新文件
- Section4 减法应用题：7个新文件
- Section4 乘法应用题：1个新文件
- Section4 除法应用题：3个新文件
- **总计：18个新文件**

### 已修改的文件
1. ✅ [生成语音.py](./生成语音.py) - 更新了section4的词汇列表

## ⚠️ 特别注意

### 关于"和"字的读音
"和"在不同语境下读音不同：
- 在"7与5的和"中读 `hé`（加法的和）✅
- 在"和面"中读 `huó`
- Edge TTS 应该能自动识别，但如果读错了，可以添加到 `POLYPHONE_MAP` 中

### 关于特殊字符
"每……有……"包含省略号，文件名会被自动处理：
- 原词：`每……有……`
- 文件名：`每……有…….mp3`

## 🎓 data.js 中的对应内容

这些新增的语音对应 data.js 中的以下内容：

```javascript
section4: {
    additionProblems: [
        { word: '一共/总共/共有', ... },  // 三个都需要语音
        { word: '和', ... },
        { word: '增加/添上', ... },      // 两个都需要语音
        { word: '合起来', ... },
        { word: '倒入', ... },
        { word: '飞来了', ... },
        { word: '游来了', ... },          // 新增
        { word: '开来了', ... },          // 新增
    ],
    subtractionProblems: [
        { word: '还剩/剩下', ... },      // 两个都需要语音
        { word: '比……多/比……少', ... },
        { word: '多多少/少多少', ... },  // 两个都需要语音
        { word: '减少/用去', ... },      // 两个都需要语音
        { word: '相差', ... },
        { word: '飞走/游走', ... },      // 两个都需要语音
    ],
    // ...
}
```

## ✅ 完成检查清单

- [ ] 执行删除旧文件命令（如需要）
- [ ] 运行 `python 生成语音.py`
- [ ] 检查生成日志，确认新文件已创建
- [ ] 在网站中测试新增词汇的语音播放
- [ ] 验证"和"字读音是否正确（hé）
- [ ] 验证所有新增语音的音质和语速

## 🔗 相关文档

- [生成语音.py](./生成语音.py) - 音频生成脚本
- [data.js](./data/data.js) - 数据文件
- [重新生成行字音频说明.md](./重新生成行字音频说明.md) - 多音字处理参考
- [多音字检查报告.md](./多音字检查报告.md) - 完整多音字列表

准备好执行命令了吗？🚀
