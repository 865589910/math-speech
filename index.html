<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="锦龙小学二年级数学学习助手，提供数学关键字词学习和游戏练习">
    <title>锦龙小学数学学习助手 - 二年级数学学习</title>
    
    <!-- 预加载关键资源 -->
    <link rel="preload" href="css/style.css" as="style">
    <link rel="preload" href="data/data.js" as="script">
    <link rel="preload" href="js/app.js" as="script">
    
    <!-- 样式表 -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎓 锦龙小学二年级数学学习助手</h1>
            <p class="subtitle">数学关键字词学习与游戏练习</p>
        </header>

        <!-- 顶部选项卡导航 -->
        <nav class="tab-navigation">
            <button class="tab-btn active" data-section="section1">
                <span class="tab-icon">📝</span>
                <span class="tab-text">核心概念字</span>
            </button>
            <button class="tab-btn" data-section="section2">
                <span class="tab-icon">📚</span>
                <span class="tab-text">核心概念词</span>
            </button>
            <button class="tab-btn" data-section="section3">
                <span class="tab-icon">💡</span>
                <span class="tab-text">基础知识点</span>
            </button>
            <button class="tab-btn" data-section="section4">
                <span class="tab-icon">✨</span>
                <span class="tab-text">常见应用题型</span>
            </button>
            <button class="tab-btn" data-section="section5">
                <span class="tab-icon">🎮</span>
                <span class="tab-text">数学游戏</span>
            </button>
        </nav>

        <main>
            <!-- 一、核心概念字 -->
            <section class="section active" id="section1">
                <div class="category">
                    <h3 class="category-title">1. 数字和数位</h3>
                    <div class="word-grid" id="numbers"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">2. 基本运算</h3>
                    <div class="word-grid" id="operations"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">3. 位置关系</h3>
                    <div class="word-grid" id="positions"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">4. 比较关系</h3>
                    <div class="word-grid" id="comparisons"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">5. 度量单位</h3>
                    <div class="word-grid" id="units"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">6. 量词、基本单位</h3>
                    <div class="word-grid" id="quantifiers"></div>
                </div>
            </section>

            <!-- 二、核心概念词 -->
            <section class="section" id="section2">
                <div class="category">
                    <h3 class="category-title">1. 常见题型</h3>
                    <div class="word-grid" id="question-types"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">2. 基本概念</h3>
                    <div class="word-grid" id="basic-concepts"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">3. 题目里常出现的物品</h3>
                    <div class="word-grid" id="items"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">4. 题目中常出现的动物</h3>
                    <div class="word-grid" id="animals"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">5. 题目中常出现的食物</h3>
                    <div class="word-grid" id="foods"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">6. 平面图形</h3>
                    <div class="word-grid" id="plane-shapes"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">7. 立体图形</h3>
                    <div class="word-grid" id="solid-shapes"></div>
                </div>
            </section>

            <!-- 三、基础知识点 -->
            <section class="section" id="section3">
                <div class="category">
                    <h3 class="category-title">1. 填合适的数方法</h3>
                    <div class="word-grid" id="fill-methods"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">2. 比较大小常用规律</h3>
                    <div class="word-grid" id="comparison-rules"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">3. 百数表规律</h3>
                    <div class="word-grid" id="hundred-table"></div>
                </div>
            </section>

            <!-- 四、常见应用题型 -->
            <section class="section" id="section4">
                <div class="category">
                    <h3 class="category-title">1. 加法解决的问题</h3>
                    <div class="word-grid" id="addition-problems"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">2. 减法解决的问题</h3>
                    <div class="word-grid" id="subtraction-problems"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">3. 乘法解决的问题</h3>
                    <div class="word-grid" id="multiplication-problems"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">4. 除法解决的问题</h3>
                    <div class="word-grid" id="division-problems"></div>
                </div>

                <div class="category">
                    <h3 class="category-title">5. 易混淆关键词辨析</h3>
                    <div class="word-grid" id="confusing-keywords"></div>
                </div>
            </section>

            <!-- 五、数学游戏 -->
            <section class="section" id="section5">
                <div class="game-container">
                    <div class="game-card" onclick="openCardGame()">
                        <div class="game-icon">🎴</div>
                        <h3 class="game-title">扑克牌抽卡游戏</h3>
                        <p class="game-desc">和两个小伙伴比赛，看谁的牌点最大且不超过限制！</p>
                        <button class="game-btn">🎮 开始游戏</button>
                    </div>
                </div>
                <div class="game-container">
                    <div class="game-card" onclick="openGuessNumberGame()">
                        <div class="game-icon">💣</div>
                        <h3 class="game-title">数字炸弹游戏</h3>
                        <p class="game-desc">猜出隐藏的数字炸弹，每次猜错范围会缩小！</p>
                        <button class="game-btn">🎮 开始游戏</button>
                    </div>
                </div>
                <div class="game-container">
                    <div class="game-card" onclick="openSudokuGame()">
                        <div class="game-icon">🧩</div>
                        <h3 class="game-title">数独游戏</h3>
                        <p class="game-desc">填入数字，让每行每列都不重复！</p>
                        <button class="game-btn">🎮 开始游戏</button>
                    </div>
                </div>

                <div class="game-container">
                    <div class="game-card" onclick="openMatchGame()">
                        <div class="game-icon">🎮</div>
                        <h3 class="game-title">数学消消乐</h3>
                        <p class="game-desc">找到得数相同的算式，配对消除得分！</p>
                        <button class="game-btn">🎮 开始游戏</button>
                    </div>
                </div>
                <div class="game-container">
                    <div class="game-card" onclick="openMathWallGame()">
                        <div class="game-icon">🧧</div>
                        <h3 class="game-title">数学墙来了</h3>
                        <p class="game-desc">操作小动物左右移动，选择正确的算式或得数！</p>
                        <button class="game-btn">🎮 开始游戏</button>
                    </div>
                </div>
                <div class="game-container">
                    <div class="game-card" onclick="openPianoTilesGame()">
                        <div class="game-icon">🎹</div>
                        <h3 class="game-title">数学钢琴块</h3>
                        <p class="game-desc">点击正确的算式，避免错误，考验反应和计算能力！</p>
                        <button class="game-btn">🎮 开始游戏</button>
                    </div>
                </div>
                <div class="game-container">
                    <div class="game-card" onclick="openShoppingGame()">
                        <div class="game-icon">🛍️</div>
                        <h3 class="game-title">购物小达人</h3>
                        <p class="game-desc">扮演顾客和售货员，学习购物计算和找零！</p>
                        <button class="game-btn">🎮 开始游戏</button>
                    </div>
                </div>
                <div class="game-container">
                    <div class="game-card" onclick="openKlotskiGame()">
                        <div class="game-icon">🧩</div>
                        <h3 class="game-title">数字华容道</h3>
                        <p class="game-desc">滑动数字方块，按顺序排列，锻炼逻辑思维！</p>
                        <button class="game-btn">🎮 开始游戏</button>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>© 2025 锦龙小学数学学习助手 </p>
        </footer>
    </div>

    <!-- 弹窗模态框 -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            
            <div class="modal-header">
                <div class="word-info-top">
                    <div class="pinyin-box">
                        <span id="modal-pinyin" class="pinyin-text"></span>
                        <button class="speaker-btn small" onclick="speakCurrentWord()" title="朱读字词">🔊</button>
                    </div>
                </div>
                <div class="word-display">
                    <canvas id="word-canvas" width="600" height="150"></canvas>
                </div>
            </div>

            <div class="modal-body">
                <div class="explanation-box">
                    <div class="explanation-header">
                        <h4>📖 解释：</h4>
                    </div>
                    <div id="modal-explanation" class="explanation-content"></div>
                </div>

                <div class="practice-area">
                    <h4>✏️ 练习书写：</h4>
                    <div class="practice-grid">
                        <canvas id="practice-canvas" width="400" height="200"></canvas>
                    </div>
                    <div class="practice-controls">
                        <button class="btn-primary" id="clear-btn">清除</button>
                        <button class="btn-secondary" id="show-guide-btn">显示辅助线</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 语音设置已删除 -->

    <!-- 扑克牌游戏模态框 -->
    <div id="card-game-modal" class="modal">
        <div class="modal-content game-modal-content">
            <span class="close-btn" onclick="closeCardGame()">&times;</span>
            
            <!-- 难度选择界面 -->
            <div id="difficulty-selection" class="difficulty-screen">
                <h2 class="game-modal-title">🎴 扑克牌抽卡游戏</h2>
                <p class="game-modal-subtitle">选择你的挑战难度</p>
                <button class="game-rules-btn" onclick="showCardGameRules()">📖 游戏规则</button>
                
                <div class="difficulty-options">
                    <div class="difficulty-card" onclick="startGame(1)">
                        <div class="difficulty-icon"><img src="images/1.png" alt="难度一" class="difficulty-img"></div>
                        <h3>难度一</h3>
                        <div class="difficulty-info">
                            <p>🎴 牌点范围：1-5</p>
                            <p>🎯 最多摸：3 张</p>
                            <p>⚠️ 淘汰线：大于 6</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="startGame(2)">
                        <div class="difficulty-icon"><img src="images/2.png" alt="难度二" class="difficulty-img"></div>
                        <h3>难度二</h3>
                        <div class="difficulty-info">
                            <p>🎴 牌点范围：1-10</p>
                            <p>🎯 最多摸：3 张</p>
                            <p>⚠️ 淘汰线：大于 11</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="startGame(3)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="难度三" class="difficulty-img"></div>
                        <h3>难度三</h3>
                        <div class="difficulty-info">
                            <p>🎴 牌点范围：1-13</p>
                            <p>🎯 最多摸：3 张</p>
                            <p>⚠️ 淘汰线：大于 18</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏界面 -->
            <div id="game-screen" class="game-screen" style="display: none;">
                <div class="game-header">
                    <h2 class="game-title">🎴 扑克牌抽卡游戏</h2>
                    <div class="game-info">
                        <span class="difficulty-badge" id="current-difficulty"></span>
                        <span class="limit-badge" id="current-limit"></span>
                    </div>
                </div>
                
                <div class="players-area">
                    <!-- 机器人1 -->
                    <div class="player-box ai-player">
                        <div class="player-header">
                            <div class="player-avatar-name">
                                <div class="player-avatar">🐼</div>
                                <span class="player-name">小明</span>
                            </div>
                            <span class="player-status" id="ai1-status"></span>
                        </div>
                        <div class="player-cards" id="ai1-cards"></div>
                        <div class="player-info" id="ai1-info">已摸牌：0 张</div>
                    </div>
                    
                    <!-- 机器人2 -->
                    <div class="player-box ai-player">
                        <div class="player-header">
                            <div class="player-avatar-name">
                                <div class="player-avatar">🐰</div>
                                <span class="player-name">小红</span>
                            </div>
                            <span class="player-status" id="ai2-status"></span>
                        </div>
                        <div class="player-cards" id="ai2-cards"></div>
                        <div class="player-info" id="ai2-info">已摸牌：0 张</div>
                    </div>
                    
                    <!-- 玩家 -->
                    <div class="player-box human-player">
                        <div class="player-header">
                            <div class="player-avatar-name">
                                <div class="player-avatar player-avatar-you">😊</div>
                                <span class="player-name">你</span>
                            </div>
                            <span class="player-status" id="player-status"></span>
                        </div>
                        <div class="player-cards" id="player-cards"></div>
                        <div class="player-total">总分：<span id="player-total">0</span></div>
                    </div>
                </div>
                
                <div class="game-controls">
                    <div id="turn-info" class="turn-info"></div>
                    <div class="control-buttons">
                        <button id="draw-btn" class="game-control-btn draw-btn" onclick="playerDraw()">🎴 摸牌</button>
                        <button id="pass-btn" class="game-control-btn pass-btn" onclick="playerPass()">✋ 不摸了</button>
                        <button id="restart-btn" class="game-control-btn restart-btn" onclick="restartGame()" style="display: none;">🔄 重新开始</button>
                        <button class="game-control-btn back-btn" onclick="backToDifficulty()">🔙 返回</button>
                    </div>
                </div>
                
                <div id="game-result" class="game-result" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- 数独游戏模态框 -->
    <div id="sudoku-game-modal" class="modal">
        <div class="modal-content game-modal-content">
            <span class="close-btn" onclick="closeSudokuGame()">&times;</span>
            
            <!-- 难度选择界面 -->
            <div id="sudoku-difficulty-selection" class="difficulty-screen">
                <h2 class="game-modal-title">🧩 数独游戏</h2>
                <p class="game-modal-subtitle">选择你的挑战难度</p>
                <button class="game-rules-btn" onclick="showSudokuGameRules()">📖 游戏规则</button>
                
                <div class="difficulty-options">
                    <div class="difficulty-card" onclick="startSudoku(3)">
                        <div class="difficulty-icon"><img src="images/1.png" alt="难度一" class="difficulty-img"></div>
                        <h3>难度一</h3>
                        <div class="difficulty-info">
                            <p>🟦 方格：3×3</p>
                            <p>🔢 数字：1-3</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="startSudoku(4)">
                        <div class="difficulty-icon"><img src="images/2.png" alt="难度二" class="difficulty-img"></div>
                        <h3>难度二</h3>
                        <div class="difficulty-info">
                            <p>🟦 方格：4×4</p>
                            <p>🔢 数字：1-4</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="startSudoku(6)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="难度三" class="difficulty-img"></div>
                        <h3>难度三</h3>
                        <div class="difficulty-info">
                            <p>🟦 方格：6×6</p>
                            <p>🔢 数字：1-6</p>
                        </div>
                        <button class="difficulty-btn">开始渨戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="startSudoku(9)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="难度四" class="difficulty-img"></div>
                        <h3>难度四</h3>
                        <div class="difficulty-info">
                            <p>🟦 方格：9×9</p>
                            <p>🔢 数字：1-9</p>
                        </div>
                        <button class="difficulty-btn">开始渨戏</button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏界面 -->
            <div id="sudoku-game-screen" class="game-screen" style="display: none;">
                <div class="game-header">
                    <h2 class="game-title">🧩 数独游戏</h2>
                    <div class="game-info">
                        <span class="difficulty-badge" id="sudoku-difficulty"></span>
                        <span class="limit-badge" id="sudoku-time">00:00</span>
                    </div>
                </div>
                
                <div class="sudoku-container" id="sudoku-container">
                    <!-- 数独方格将动态生成 -->
                </div>
                
                <div class="sudoku-controls">
                    <div class="number-buttons" id="number-buttons">
                        <!-- 数字按钮将动态生成 -->
                    </div>
                    <div class="control-buttons">
                        <button class="game-control-btn" onclick="clearSudokuCell()">✘️ 清除</button>
                        <button class="game-control-btn" onclick="checkSudoku()">✅ 检查</button>
                        <button id="sudoku-restart-btn" class="game-control-btn restart-btn" onclick="restartSudoku()">🔄 重新开始</button>
                        <button class="game-control-btn back-btn" onclick="backToSudokuDifficulty()">🔙 返回</button>
                    </div>
                </div>
                
                <div id="sudoku-result" class="game-result" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- 猜数游戏模态框 -->
    <div id="guess-number-modal" class="modal">
        <div class="modal-content game-modal-content">
            <span class="close-btn" onclick="closeGuessNumberGame()">&times;</span>
            
            <!-- 难度选择界面 -->
            <div id="guess-number-difficulty-screen" class="difficulty-screen">
                <h2 class="game-modal-title">💣 数字炸弹游戏 💣</h2>
                <p class="game-modal-subtitle">选择你的挑战难度</p>
                <button class="game-rules-btn" onclick="showGuessGameRules()">📖 游戏规则</button>
                
                <div class="difficulty-options">
                    <div class="difficulty-card" onclick="selectGuessNumberDifficulty(1)">
                        <div class="difficulty-icon"><img src="images/1.png" alt="难度一" class="difficulty-img"></div>
                        <h3>难度一</h3>
                        <div class="difficulty-info">
                            <p>🔢 数字范围：1-50</p>
                            <p>🎯 难度：简单</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectGuessNumberDifficulty(2)">
                        <div class="difficulty-icon"><img src="images/2.png" alt="难度二" class="difficulty-img"></div>
                        <h3>难度二</h3>
                        <div class="difficulty-info">
                            <p>🔢 数字范围：1-100</p>
                            <p>🎯 难度：中等</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectGuessNumberDifficulty(3)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="难度三" class="difficulty-img"></div>
                        <h3>难度三</h3>
                        <div class="difficulty-info">
                            <p>🔢 数字范围：1-200</p>
                            <p>🎯 难度：困难</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏界面 -->
            <div id="guess-number-game-screen" style="display: none;">
                <div class="guess-game-header">
                    <h2 class="game-modal-title">💣 数字炸弹游戏 💣</h2>
                    <div class="guess-game-info">
                        <p>我已经在<span id="guess-difficulty-name">简单(1-50)</span>范围内设置了一个数字炸弹，点击数字进行猜测！</p>
                        <p>每次猜测后，不在范围内的数字将会消失，只显示当前范围内的数字。</p>
                    </div>
                </div>
                
                <div class="guess-range-display">
                    当前范围: <span id="guess-min">1</span> - <span id="guess-max">50</span>
                </div>
                
                <div class="guess-stats">
                    <div class="guess-stat">
                        <div class="guess-stat-label">剩余数字</div>
                        <div class="guess-stat-value" id="guess-remaining">50</div>
                    </div>
                    <div class="guess-stat">
                        <div class="guess-stat-label">猜测次数</div>
                        <div class="guess-stat-value" id="guess-count">0</div>
                    </div>
                </div>
                
                <div id="numbers-grid" class="numbers-grid"></div>
                
                <div id="guess-message" class="guess-message info" style="display: none;">
                    游戏开始！请点击一个数字进行猜测。
                </div>
                
                <div class="control-buttons">
                    <button id="guess-restart-btn" class="game-control-btn restart-btn" onclick="restartGuessNumberGame()">🔄 重新开始</button>
                    <button class="game-control-btn back-btn" onclick="backToGuessNumberDifficulty()">🔙 返回</button>
                </div>
            </div>
        </div>
    </div>


    <!-- 数学消消乐游戏模态框 -->
    <div id="match-game-modal" class="modal">
        <div class="modal-content game-modal-content">
            <span class="close-btn" onclick="closeMatchGame()">&times;</span>
            
            <!-- 难度选择界面 -->
            <div id="match-difficulty-screen" class="difficulty-screen">
                <h2 class="game-modal-title">🎮 数学消消乐 🎮</h2>
                <p class="game-modal-subtitle">选择你的挑战难度</p>
                <button class="game-rules-btn" onclick="showMatchGameRules()">📖 游戏规则</button>
                
                <div class="difficulty-options">
                    <div class="difficulty-card" onclick="selectMatchDifficulty(0)">
                        <div class="difficulty-icon"><img src="images/1.png" alt="简单模式" class="difficulty-img"></div>
                        <h3>简单模式</h3>
                        <div class="difficulty-info">
                            <p>🔢 方块：4×4</p>
                            <p>➕ 类型：20以内加法</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectMatchDifficulty(1)">
                        <div class="difficulty-icon"><img src="images/1.png" alt="难度一" class="difficulty-img"></div>
                        <h3>难度一</h3>
                        <div class="difficulty-info">
                            <p>🔢 方块：4×2</p>
                            <p>➕ 类型：加减法</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectMatchDifficulty(2)">
                        <div class="difficulty-icon"><img src="images/2.png" alt="难度二" class="difficulty-img"></div>
                        <h3>难度二</h3>
                        <div class="difficulty-info">
                            <p>🔢 方块：4×4</p>
                            <p>➕ 类型：加减法</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectMatchDifficulty(3)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="难度三" class="difficulty-img"></div>
                        <h3>难度三</h3>
                        <div class="difficulty-info">
                            <p>🔢 方块：4×4</p>
                            <p>✖️ 类型：混合运算</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectMatchDifficulty(4)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="难度四" class="difficulty-img"></div>
                        <h3>难度四</h3>
                        <div class="difficulty-info">
                            <p>🔢 方块：4×3</p>
                            <p>🧠 类型：记忆模式</p>
                            <p>❤️ 生命：8 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectMatchDifficulty(5)">
                        <div class="difficulty-icon">♾️</div>
                        <h3>无尽模式</h3>
                        <div class="difficulty-info">
                            <p>🔢 方块：4×3</p>
                            <p>♾️ 持续挑战</p>
                            <p>❤️ 生命：5 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏界面 -->
            <div id="match-game-screen" style="display: none;">
                <div class="match-game-header">
                    <div class="match-game-title">🎮 数学消消乐</div>
                    <div class="match-difficulty-badge" id="match-difficulty-name">简单</div>
                </div>
                
                <div class="match-stats">
                    <div class="match-stat">
                        <div class="match-stat-label">⭐ 得分</div>
                        <div class="match-stat-value" id="match-score">0</div>
                    </div>
                    <div class="match-stat">
                        <div class="match-stat-label">⏱️ 用时</div>
                        <div class="match-stat-value" id="match-timer">0:00</div>
                    </div>
                    <div class="match-stat">
                        <div class="match-stat-label">❤️ 生命</div>
                        <div class="match-lives" id="match-lives">
                            <span class="life-heart active">❤️</span>
                            <span class="life-heart active">❤️</span>
                            <span class="life-heart active">❤️</span>
                        </div>
                    </div>
                </div>
                
                <div id="match-message" class="match-message" style="display: none;"></div>
                
                <div class="match-blocks-container" id="match-blocks-container">
                    <!-- 方块将动态生成 -->
                </div>
                
                <div id="match-result" class="game-result" style="display: none;"></div>
                
                <div class="control-buttons">
                    <button id="match-restart-btn" class="game-control-btn restart-btn" onclick="restartMatchGame()">🔄 重新开始</button>
                    <button class="game-control-btn back-btn" onclick="backToMatchDifficulty()">🔙 返回</button>
                </div>
            </div>
        </div>
    </div>


    <!-- 数学墙来了游戏模态框 -->
    <div id="math-wall-modal" class="modal">
        <div class="modal-content game-modal-content">
            <span class="close-btn" onclick="closeMathWallGame()">&times;</span>
            
            <!-- 难度选择界面 -->
            <div id="math-wall-difficulty-screen" class="difficulty-screen">
                <h2 class="game-modal-title">🧱 数学墙来了 🧱</h2>
                <p class="game-modal-subtitle">选择你的挑战难度</p>
                <button class="game-rules-btn" onclick="showMathWallGameRules()">📖 游戏规则</button>
                
                <!-- 速度调节器 -->
                <div class="speed-control-section">
                    <h3 class="speed-control-title">⚡ 调整墙下落速度</h3>
                    <div class="speed-control-container">
                        <div class="speed-labels">
                            <span class="speed-label">🐌 慢速</span>
                            <span class="speed-label">🐇 正常</span>
                            <span class="speed-label">🐆 快速</span>
                        </div>
                        <input type="range" id="wall-speed-slider" class="speed-slider" 
                               min="0.5" max="2.0" step="0.1" value="1.0" 
                               oninput="updateWallSpeedDisplay(this.value)">
                        <div class="speed-display">
                            当前速度：<span id="wall-speed-value">1.0</span>x
                        </div>
                    </div>
                </div>
                
                <div class="difficulty-options">
                    <div class="difficulty-card" onclick="selectMathWallDifficulty(1)">
                        <div class="difficulty-icon"><img src="images/1.png" alt="难度一" class="difficulty-img"></div>
                        <h3>难度一</h3>
                        <div class="difficulty-info">
                            <p>🧱 墙道数：2 道</p>
                            <p>📊 算式：20以内加减法</p>
                            <p>✅ 目标：通过10道墙</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectMathWallDifficulty(2)">
                        <div class="difficulty-icon"><img src="images/2.png" alt="难度二" class="difficulty-img"></div>
                        <h3>难度二</h3>
                        <div class="difficulty-info">
                            <p>🧱 墙道数：2 道</p>
                            <p>📊 算式：100以内加减法</p>
                            <p>✅ 目标：通过10道墙</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectMathWallDifficulty(3)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="难度三" class="difficulty-img"></div>
                        <h3>难度三</h3>
                        <div class="difficulty-info">
                            <p>🧱 墙道数：3 道</p>
                            <p>📊 算式：100以内加减法</p>
                            <p>✅ 目标：通过10道墙</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectMathWallDifficulty(4)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="难度四" class="difficulty-img"></div>
                        <h3>难度四</h3>
                        <div class="difficulty-info">
                            <p>🧱 墙道数：5 道</p>
                            <p>📊 算式：100以内加减法</p>
                            <p>✅ 目标：通过10道墙</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectMathWallDifficulty(5)">
                        <div class="difficulty-icon">♾️</div>
                        <h3>无尽模式</h3>
                        <div class="difficulty-info">
                            <p>🧱 墙道：2道起，逐步增至6道</p>
                            <p>📊 算式：100以内加减法</p>
                            <p>⭐ 得分：每道墙+2分</p>
                            <p>❤️ 生命：5 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏界面 -->
            <div id="math-wall-game-screen" style="display: none;">
                <div class="math-wall-game-header">
                    <div class="math-wall-game-title">🧱 数学墙来了</div>
                    <div id="math-wall-target" class="math-wall-target">
                        <!-- 目标显示（放回顶部） -->
                    </div>
                </div>
                
                <div class="math-wall-container" id="math-wall-container">
                    <!-- 游戏容器：墙和玩家 -->
                </div>
                
                <div class="math-wall-mobile-controls">
                    <button class="mobile-control-btn left-btn" onclick="moveMathWallPlayer('left')" ontouchstart="moveMathWallPlayer('left'); event.preventDefault();">
                        <span class="control-arrow">◀</span>
                        <span class="control-text">左移</span>
                    </button>
                    <button class="mobile-control-btn right-btn" onclick="moveMathWallPlayer('right')" ontouchstart="moveMathWallPlayer('right'); event.preventDefault();">
                        <span class="control-text">右移</span>
                        <span class="control-arrow">▶</span>
                    </button>
                </div>
                
                <div class="math-wall-bottom-info">
                    <div class="math-wall-stats">
                        <div class="math-wall-stat">
                            <div class="math-wall-stat-label" id="math-wall-score-label">🎯 进度</div>
                            <div class="math-wall-stat-value" id="math-wall-score">0/10</div>
                        </div>
                        <div class="math-wall-stat">
                            <div class="math-wall-stat-label">❤️ 生命</div>
                            <div class="math-wall-lives" id="math-wall-lives">
                                <span class="life-heart active">❤️</span>
                                <span class="life-heart active">❤️</span>
                                <span class="life-heart active">❤️</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="math-wall-controls">
                    <p class="control-hint">💡 点击墙块 | 键盘←→/AD键 | 左右按钮，任选其一控制小熊</p>
                </div>
                
                <div id="math-wall-result" class="game-result" style="display: none;"></div>
                
                <div class="control-buttons">
                    <button id="math-wall-restart-btn" class="game-control-btn restart-btn" onclick="restartMathWallGame()">🔄 重新开始</button>
                    <button class="game-control-btn back-btn" onclick="backToMathWallDifficulty()">🔙 返回</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 数学钢琴块游戏模态框 -->
    <div id="piano-tiles-modal" class="modal">
        <div class="modal-content game-modal-content">
            <span class="close-btn" onclick="closePianoTilesGame()">&times;</span>
            
            <!-- 难度选择界面 -->
            <div id="piano-difficulty-screen" class="difficulty-screen">
                <h2 class="game-modal-title">🎹 数学钢琴块 🎹</h2>
                <p class="game-modal-subtitle">选择你的挑战难度</p>
                <button class="game-rules-btn" onclick="showPianoGameRules()">📖 游戏规则</button>
                
                <!-- 速度调节器 -->
                <div class="speed-control-section">
                    <h3 class="speed-control-title">⚡ 调整下落速度</h3>
                    <div class="speed-control-container">
                        <div class="speed-labels">
                            <span class="speed-label">🐌 慢速</span>
                            <span class="speed-label">🐇 正常</span>
                            <span class="speed-label">🐆 快速</span>
                        </div>
                        <input type="range" id="piano-speed-slider" class="speed-slider" 
                               min="0.5" max="2.0" step="0.1" value="0.8" 
                               oninput="updatePianoSpeedDisplay(this.value)">
                        <div class="speed-display">
                            当前速度：<span id="piano-speed-value">0.8</span>x
                        </div>
                    </div>
                </div>
                
                <div class="difficulty-options">
                    <div class="difficulty-card" onclick="selectPianoDifficulty(1)">
                        <div class="difficulty-icon"><img src="images/1.png" alt="难度一" class="difficulty-img"></div>
                        <h3>难度一</h3>
                        <div class="difficulty-info">
                            <p>🔢 算式：20以内加减法</p>
                            <p>🎯 目标：正确点击20个</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectPianoDifficulty(2)">
                        <div class="difficulty-icon"><img src="images/2.png" alt="难度二" class="difficulty-img"></div>
                        <h3>难度二</h3>
                        <div class="difficulty-info">
                            <p>🔢 算式：100以内加减法</p>
                            <p>🎯 目标：正确点击20个</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectPianoDifficulty(3)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="难度三" class="difficulty-img"></div>
                        <h3>难度三 - 乘法口诀</h3>
                        <div class="difficulty-info">
                            <p>✖️ 算式：9×9乘法口诀</p>
                            <p>🎯 目标：正确点击20个</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectPianoDifficulty(4)">
                        <div class="difficulty-icon">♾️</div>
                        <h3>难度四 - 无尽模式</h3>
                        <div class="difficulty-info">
                            <p>🔢 算式：100以内加减法</p>
                            <p>♾️ 无尽挑战</p>
                            <p>⭐ 得分：正确点击+2分</p>
                            <p>❤️ 生命：3 颗心</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏界面 -->
            <div id="piano-game-screen" class="game-screen" style="display: none;">
                <div class="piano-game-header">
                    <div class="piano-game-title">🎹 数学钢琴块</div>
                    <div class="piano-difficulty-badge" id="piano-difficulty-name">难度一</div>
                </div>
                
                <div class="piano-stats">
                    <div class="piano-stat">
                        <div class="piano-stat-label" id="piano-score-label">🎯 进度</div>
                        <div class="piano-stat-value" id="piano-score">0/20</div>
                    </div>
                    <div class="piano-stat">
                        <div class="piano-stat-label">⚡ 速度</div>
                        <div class="piano-stat-value" id="piano-speed">0.5</div>
                    </div>
                    <div class="piano-stat">
                        <div class="piano-stat-label">❤️ 生命</div>
                        <div class="piano-lives" id="piano-lives">
                            <span class="life-heart active">❤️</span>
                            <span class="life-heart active">❤️</span>
                            <span class="life-heart active">❤️</span>
                        </div>
                    </div>
                </div>
                
                <div class="piano-tiles-container" id="piano-tiles-container">
                    <!-- 钢琴块将动态生成 -->
                </div>
                
                <div id="piano-result" class="game-result" style="display: none;"></div>
                
                <div class="control-buttons">
                    <button id="piano-restart-btn" class="game-control-btn restart-btn" onclick="restartPianoGame()" style="display: none;">🔄 重新开始</button>
                    <button class="game-control-btn back-btn" onclick="backToPianoDifficulty()">🔙 返回</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 购物小达人游戏模态框 -->
    <div id="shopping-modal" class="modal">
        <div class="modal-content game-modal-content">
            <span class="close-btn" onclick="closeShoppingGame()">&times;</span>
            
            <!-- 难度选择界面 -->
            <div id="shopping-difficulty-screen" class="difficulty-screen">
                <h2 class="game-modal-title">🛍️ 购物小达人 🛍️</h2>
                <p class="game-modal-subtitle">扮演顾客和售货员，学习购物、计算和找零</p>
                <button class="game-rules-btn" onclick="showShoppingGameRules()">📖 游戏规则</button>
                
                <div class="difficulty-options">
                    <div class="difficulty-card" onclick="selectShoppingDifficulty(1)">
                        <div class="difficulty-icon"><img src="images/1.png" alt="简单模式" class="difficulty-img"></div>
                        <h3>简单模式</h3>
                        <div class="difficulty-info">
                            <p>🛍️ 最多选3件商品</p>
                            <p>💰 总价不超过50元</p>
                            <p>💵 钱币：1/2/5/10/20/50元</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectShoppingDifficulty(2)">
                        <div class="difficulty-icon"><img src="images/2.png" alt="普通模式" class="difficulty-img"></div>
                        <h3>普通模式</h3>
                        <div class="difficulty-info">
                            <p>🛍️ 最多选5件商品</p>
                            <p>💰 总价不超过100元</p>
                            <p>💵 钱币：1/2/5/10/20/50/100元</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectShoppingDifficulty(3)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="困难模式" class="difficulty-img"></div>
                        <h3>困难模式</h3>
                        <div class="difficulty-info">
                            <p>🛍️ 最多选8件商品</p>
                            <p>💰 总价不超过200元</p>
                            <p>💵 钱币：1/2/5/10/20/50/100元</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏界面 -->
            <div id="shopping-game-screen" class="game-screen" style="display: none;">
                <div class="piano-game-header">
                    <div class="piano-game-title">🛍️ 购物小达人</div>
                    <div class="piano-difficulty-badge" id="shopping-difficulty-name">简单模式</div>
                </div>
                
                <div class="piano-stats">
                    <div class="piano-stat">
                        <div class="piano-stat-label">⭐ 得分</div>
                        <div class="piano-stat-value" id="shopping-score">0</div>
                    </div>
                    <div class="piano-stat">
                        <div class="piano-stat-label">❤️ 生命</div>
                        <div class="piano-lives" id="shopping-lives">
                            <span class="life-heart active">❤️</span>
                            <span class="life-heart active">❤️</span>
                            <span class="life-heart active">❤️</span>
                        </div>
                    </div>
                </div>
                
                <div id="shopping-step-container" class="shopping-step-container">
                    <!-- 游戏步骤内容将动态生成 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 数字华容道游戏模态框 -->
    <div id="klotski-modal" class="modal">
        <div class="modal-content game-modal-content">
            <span class="close-btn" onclick="closeKlotskiGame()">&times;</span>
            
            <!-- 难度选择界面 -->
            <div id="klotski-difficulty-screen" class="difficulty-screen">
                <h2 class="game-modal-title">🧩 数字华容道 🧩</h2>
                <p class="game-modal-subtitle">选择你的挑战难度</p>
                <button class="game-rules-btn" onclick="showKlotskiGameRules()">📖 游戏规则</button>
                
                <div class="difficulty-options">
                    <div class="difficulty-card" onclick="selectKlotskiDifficulty(3)">
                        <div class="difficulty-icon"><img src="images/1.png" alt="简单模式" class="difficulty-img"></div>
                        <h3>简单模式</h3>
                        <div class="difficulty-info">
                            <p>🔢 网格：3×3</p>
                            <p>🎯 难度：入门</p>
                            <p>🏆 目标：30步内完成</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectKlotskiDifficulty(4)">
                        <div class="difficulty-icon"><img src="images/2.png" alt="中等模式" class="difficulty-img"></div>
                        <h3>中等模式</h3>
                        <div class="difficulty-info">
                            <p>🔢 网格：4×4</p>
                            <p>🎯 难度：进阶</p>
                            <p>🏆 目标：80步内完成</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                    
                    <div class="difficulty-card" onclick="selectKlotskiDifficulty(5)">
                        <div class="difficulty-icon"><img src="images/3.png" alt="困难模式" class="difficulty-img"></div>
                        <h3>困难模式</h3>
                        <div class="difficulty-info">
                            <p>🔢 网格：5×5</p>
                            <p>🎯 难度：高手</p>
                            <p>🏆 目标：150步内完成</p>
                        </div>
                        <button class="difficulty-btn">开始游戏</button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏界面 -->
            <div id="klotski-game-screen" class="game-screen" style="display: none;">
                <div class="piano-game-header">
                    <div class="piano-game-title">🧩 数字华容道</div>
                    <div class="piano-difficulty-badge" id="klotski-difficulty-name">简单 (3×3)</div>
                </div>
                
                <div class="klotski-stats">
                    <div class="klotski-stat">
                        <div class="klotski-stat-label">⏱️ 用时</div>
                        <div class="klotski-stat-value" id="klotski-time">0:00</div>
                    </div>
                    <div class="klotski-stat">
                        <div class="klotski-stat-label">👣 步数</div>
                        <div class="klotski-stat-value" id="klotski-moves">0</div>
                    </div>
                </div>
                
                <div class="klotski-best-records">
                    <div class="klotski-best-record">
                        <span>🏆 最少步数：</span>
                        <span id="klotski-best-moves">--</span>
                    </div>
                    <div class="klotski-best-record">
                        <span>⏱️ 最快时间：</span>
                        <span id="klotski-best-time">--</span>
                    </div>
                    <div class="klotski-best-record">
                        <span>⚡ 最佳效率：</span>
                        <span id="klotski-best-efficiency">--</span>
                    </div>
                </div>
                
                <div id="klotski-grid" class="klotski-grid">
                    <!-- 方块将动态生成 -->
                </div>
                
                <div id="klotski-result" class="game-result" style="display: none;"></div>
                
                <div class="control-buttons">
                    <button class="game-control-btn" onclick="showKlotskiHint()">💡 提示</button>
                    <button id="klotski-restart-btn" class="game-control-btn restart-btn" onclick="restartKlotskiGame()">🔄 重新开始</button>
                    <button class="game-control-btn back-btn" onclick="backToKlotskiDifficulty()">🔙 返回</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 核心数据和主要脚本立即加载 -->
    <script src="data/data.js"></script>
    <script src="js/app.js"></script>
    
    <!-- 游戏脚本延迟加载，提升首屏速度 -->
    <script defer src="js/audio-player.js"></script>
    <script defer src="js/game-rules.js"></script>
    <script defer src="js/card-game.js"></script>
    <script defer src="js/sudoku-game.js"></script>
    <script defer src="js/guess-number-game.js"></script>
    <script defer src="js/match-game.js"></script>
    <script defer src="js/math-wall-game.js"></script>
    <script defer src="js/piano-tiles-game.js"></script>
    <script defer src="js/shopping-game.js"></script>
    <script defer src="js/klotski-game.js"></script>
</body>
</html>
