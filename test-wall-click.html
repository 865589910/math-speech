<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>墙块点击测试</title>
    <style>
        body {
            margin: 20px;
            font-family: Arial, sans-serif;
        }
        
        .test-container {
            position: relative;
            width: 600px;
            height: 400px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px auto;
        }
        
        .test-wall {
            position: absolute;
            width: 180px;
            height: 80px;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 3px solid #9b59b6;
            transition: all 0.2s;
            z-index: 50;
            cursor: pointer;
            pointer-events: auto;
        }
        
        .test-wall:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(155, 89, 182, 0.5);
        }
        
        .test-wall:active {
            transform: scale(0.95);
        }
        
        .test-player {
            position: absolute;
            bottom: 30px;
            font-size: 4em;
            transform: translateX(-50%);
            transition: left 0.2s ease-out;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
            z-index: 100;
        }
        
        .info {
            text-align: center;
            margin: 20px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 8px;
        }
        
        .log {
            max-width: 600px;
            margin: 20px auto;
            padding: 15px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .log-item {
            padding: 5px;
            border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center;">墙块点击功能测试</h1>
    
    <div class="info">
        <p><strong>测试说明：</strong>点击任意墙块，小熊应该移动到该墙块下方</p>
        <p id="position-info">当前位置：道数 1</p>
    </div>
    
    <div class="test-container" id="container">
        <div class="test-wall" data-lane="0" style="left: 10px; top: 100px;">5 + 3</div>
        <div class="test-wall" data-lane="1" style="left: 210px; top: 100px;">8</div>
        <div class="test-wall" data-lane="2" style="left: 410px; top: 100px;">7</div>
        
        <div class="test-player" id="player" style="left: 110px;">🐻</div>
    </div>
    
    <div class="log" id="log">
        <div class="log-item">点击日志将显示在这里...</div>
    </div>
    
    <script>
        const playerPositions = [110, 310, 510]; // 三个道的X坐标
        let currentPosition = 0;
        
        const player = document.getElementById('player');
        const positionInfo = document.getElementById('position-info');
        const logContainer = document.getElementById('log');
        
        function addLog(message) {
            const logItem = document.createElement('div');
            logItem.className = 'log-item';
            logItem.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.insertBefore(logItem, logContainer.firstChild);
        }
        
        function updatePlayerPosition(lane) {
            currentPosition = lane;
            player.style.left = playerPositions[lane] + 'px';
            positionInfo.textContent = `当前位置：道数 ${lane}`;
            addLog(`移动到道数 ${lane}`);
        }
        
        // 给所有墙块添加点击事件
        const walls = document.querySelectorAll('.test-wall');
        walls.forEach((wall, index) => {
            const lane = parseInt(wall.dataset.lane);
            
            // 鼠标点击
            wall.addEventListener('click', function(e) {
                e.stopPropagation();
                addLog(`点击了墙块 ${index + 1}，道数：${lane}，内容：${wall.textContent}`);
                updatePlayerPosition(lane);
            });
            
            // 触摸事件
            wall.addEventListener('touchstart', function(e) {
                e.preventDefault();
                e.stopPropagation();
                addLog(`触摸了墙块 ${index + 1}，道数：${lane}，内容：${wall.textContent}`);
                updatePlayerPosition(lane);
            }, { passive: false });
            
            addLog(`墙块 ${index + 1} 事件已绑定，道数：${lane}`);
        });
        
        addLog('测试页面加载完成，共有 ' + walls.length + ' 个墙块');
    </script>
</body>
</html>
